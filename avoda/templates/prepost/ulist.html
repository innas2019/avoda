{% extends 'base.html' %}
{% block content %}
<div class="row">
  <div class="col-md-6">
    <span class="text fs-5 fw-semibold">{{title}}</span>
  </div>
  <div class="col-md-6">
    {{ pagination.info }}
  </div>
</div>

<div class="row justify-content-end">

  <div class="col-md-2 mb-2"><input type="button" class="btn btn-dark btn-sm rounded-2" value="Фильтр"
      onclick="window.location.href='/filter/set';" />
    {% if session['filter']!="" %}
    &nbsp
    <input type="button" class="btn btn-dark btn-sm rounded-2" value="Показать все"
      onclick="window.location.href='/filter/all';" />

    {% endif %}
  </div>

  <div class="col-md-3 mb-3">
    <form class="form-floating" action="/search" method="post">

      <input type="text" class="form-control-sm" name="phone" pattern=".{3,30}" title="длина от 3 символов"
        placeholder="телефон" required />
      &nbsp
      <input type="submit" class="btn btn-dark btn-sm rounded-2" data-bs-toggle="tooltip" data-bs-placement="top"
        title="поиск по номеру телефона" value="Найти" />

    </form>
  </div>
  {% if session['search']!="" %}
  <div class="col-md-2 mb-3"> <input type="button" class="btn btn-dark btn-sm rounded-2" value="выйти из поиска"
      title="вернуться к списку" onclick="window.location.href='/search';" />
  </div>
  {% endif %}
</div>
<div class="row">
  {{ pagination.links }}
</div>
<div class="row">
  <table id="data" class="table table-striped table-hover border-top border-bottom border-light">
    <thead>
      <tr class="table-secondary border-start border-end border-light text-left">
        <th scope="col">№</th>
        <th scope="col">Контакт</th>
        <th scope="col">Город</th>
        <th scope="col-md-6">Описание</th>
        <th scope="col-md-2">Статус</th>
      </tr>
    </thead>
    <tbody>
      {% for post in list %}
      <tr class="{{ loop.cycle('table-default', 'table-light') }}  border-start border-end border-light">
        <th scope="row">
          <a class="link-underline-primary" href="/prepost/{{post["id"]}}">
            {{post["id"]}}
          </a>
        </th>
        <td>
          <a class="link-underline-primary" href="/prepost/{{post["id"]}}"> {{ post["phone"] }} </a>
        </td>
        <td>
          {{ refs[post["place"]]}}</td>
        </td>
        <td>
          {{ post["text"]}}
        </td>
        </td>
        <td>
          {% if post["result"]!=None %}
          {{ results[post["result"]]}}
          {%else%}
          -
          {%endif%}
        </td>

      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}